â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    SYFT DEFI PLATFORM - DEPLOYMENT GUIDE                  â•‘
â•‘                                                                           â•‘
â•‘  Frontend: Vercel                                                        â•‘
â•‘  Backend: Heroku ($300 credits)                                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

================================================================================
PART 1: PRE-DEPLOYMENT CHECKLIST
================================================================================

Before deploying, ensure you have:
âœ“ Git repository pushed to GitHub
âœ“ Vercel account (https://vercel.com)
âœ“ Heroku account with $300 credits
âœ“ Supabase project created (https://supabase.com)
âœ“ OpenAI API key (optional, for AI features)
âœ“ Stellar network contracts deployed (FUTURENET/TESTNET)

================================================================================
PART 2: DATABASE SETUP (SUPABASE)
================================================================================

1. Create Supabase Project:
   - Go to https://app.supabase.com
   - Click "New Project"
   - Name: syft-defi-platform
   - Database Password: [Save this securely]
   - Region: Choose closest to your users

2. Run Database Migrations:
   - Go to SQL Editor in Supabase Dashboard
   - Run each migration file in order:
     * backend/migrations/001_users.sql
     * backend/migrations/002_vaults.sql
     * backend/migrations/003_vault_performance.sql
     * backend/migrations/004_backtest_results.sql
     * backend/migrations/005_ai_suggestions.sql
     * backend/migrations/006_vault_nfts.sql
     * backend/migrations/007_marketplace.sql
     * backend/migrations/008_add_network_column.sql
     * backend/migrations/009_vault_transactions.sql
     * backend/migrations/010_profit_sharing_marketplace.sql
     * backend/migrations/011_vault_subscriptions.sql
     * backend/migrations/012_vault_positions.sql
     * backend/migrations/013_remove_ownership_percentage.sql
     * backend/migrations/014_chat_history.sql

3. Get API Credentials:
   - Go to Settings > API
   - Copy these values (you'll need them later):
     * Project URL (SUPABASE_URL)
     * anon public key (SUPABASE_ANON_KEY)
     * service_role key (SUPABASE_SERVICE_ROLE_KEY) [Keep this secret!]

================================================================================
PART 3: BACKEND DEPLOYMENT (HEROKU)
================================================================================

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
3.1 Prepare Backend for Heroku
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Install Heroku CLI:
   PowerShell:
   winget install Heroku.HerokuCLI
   
   Or download from: https://devcenter.heroku.com/articles/heroku-cli

2. Login to Heroku:
   heroku login

3. Create Procfile in backend/ directory:
   cd backend
   echo "web: node dist/index.js" > Procfile

4. Ensure backend/package.json has correct scripts:
   {
     "scripts": {
       "dev": "tsx watch src/index.ts",
       "build": "tsc",
       "start": "node dist/index.js",
       "postinstall": "npm run build"
     }
   }

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
3.2 Create Heroku App
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Create new Heroku app:
   cd backend
   heroku create syft-defi-backend

   Note: If "syft-defi-backend" is taken, choose another name

2. Add Node.js buildpack:
   heroku buildpacks:set heroku/nodejs --app syft-defi-backend

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
3.3 Configure Environment Variables on Heroku
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Set all required environment variables:

heroku config:set NODE_ENV=production --app syft-defi-backend
heroku config:set PORT=3001 --app syft-defi-backend

# Supabase (from Part 2)
heroku config:set SUPABASE_URL="your_supabase_url" --app syft-defi-backend
heroku config:set SUPABASE_ANON_KEY="your_anon_key" --app syft-defi-backend
heroku config:set SUPABASE_SERVICE_ROLE_KEY="your_service_role_key" --app syft-defi-backend

# OpenAI (optional, for AI features)
heroku config:set OPENAI_API_KEY="your_openai_api_key" --app syft-defi-backend
heroku config:set OPENAI_MODEL="gpt-4o-mini" --app syft-defi-backend

# Security
heroku config:set JWT_SECRET="$(openssl rand -hex 32)" --app syft-defi-backend

# CORS - Update after you get Vercel URL
heroku config:set CORS_ORIGINS="https://your-vercel-app.vercel.app" --app syft-defi-backend

# Optional APIs
heroku config:set TAVILY_API_KEY="your_tavily_key" --app syft-defi-backend
heroku config:set RUNWARE_API_KEY="your_runware_key" --app syft-defi-backend

# Stellar Deployer Key (for on-chain transactions)
heroku config:set DEPLOYER_SECRET_KEY="your_deployer_secret" --app syft-defi-backend

# Rate limiting
heroku config:set RATE_LIMIT_WINDOW_MS=900000 --app syft-defi-backend
heroku config:set RATE_LIMIT_MAX_REQUESTS=100 --app syft-defi-backend

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
3.4 Deploy Backend to Heroku
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Initialize git in backend folder (if not already):
   cd backend
   git init
   git add .
   git commit -m "Prepare backend for Heroku deployment"

2. Deploy to Heroku:
   git remote add heroku https://git.heroku.com/syft-defi-backend.git
   git push heroku main

   If your branch is not 'main', use:
   git push heroku your-branch-name:main

3. Check logs to ensure it's running:
   heroku logs --tail --app syft-defi-backend

4. Open your backend:
   heroku open --app syft-defi-backend

   Test health endpoint:
   https://syft-defi-backend.herokuapp.com/health

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
3.5 Scale Heroku Dyno (Use Your Credits)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. View available dynos:
   heroku ps --app syft-defi-backend

2. Scale to Hobby or Standard (recommended):
   # Hobby ($7/month) - No sleeping, better performance
   heroku ps:scale web=1:hobby --app syft-defi-backend

   # Standard-1X ($25/month) - Better for production
   heroku ps:scale web=1:standard-1x --app syft-defi-backend

   # Standard-2X ($50/month) - High traffic
   heroku ps:scale web=1:standard-2x --app syft-defi-backend

3. Enable metrics (recommended):
   heroku labs:enable "runtime-heroku-metrics" --app syft-defi-backend

4. Check your billing:
   https://dashboard.heroku.com/account/billing

================================================================================
PART 4: FRONTEND DEPLOYMENT (VERCEL)
================================================================================

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
4.1 Prepare Frontend for Vercel
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Create vercel.json in frontend/ directory:
   cd frontend
   Create file: frontend/vercel.json (see below for content)

2. Ensure frontend/package.json has correct build command:
   {
     "scripts": {
       "build": "tsc -b && vite build",
       "preview": "vite preview"
     }
   }

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
4.2 Deploy to Vercel (Web Dashboard Method)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Go to https://vercel.com
2. Click "Add New Project"
3. Import your Git repository
4. Configure project:
   - Framework Preset: Vite
   - Root Directory: frontend
   - Build Command: npm run build
   - Output Directory: dist
   - Install Command: npm install

5. Configure Environment Variables:
   Click "Environment Variables" and add:

   VITE_PUBLIC_STELLAR_NETWORK = FUTURENET
   VITE_PUBLIC_STELLAR_NETWORK_PASSPHRASE = Test SDF Future Network ; October 2022
   VITE_PUBLIC_STELLAR_RPC_URL = https://rpc-futurenet.stellar.org
   VITE_PUBLIC_STELLAR_HORIZON_URL = https://horizon-futurenet.stellar.org
   VITE_PUBLIC_SUPABASE_URL = [Your Supabase URL from Part 2]
   VITE_PUBLIC_SUPABASE_ANON_KEY = [Your Supabase anon key from Part 2]
   VITE_VITE_PUBLIC_BACKEND_URL = https://syft-defi-backend.herokuapp.com
   VITE_PUBLIC_VAULT_FACTORY_CONTRACT_ID = [Your deployed contract ID]

6. Click "Deploy"

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
4.3 Deploy to Vercel (CLI Method - Alternative)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Install Vercel CLI:
   npm install -g vercel

2. Login to Vercel:
   vercel login

3. Deploy from frontend directory:
   cd frontend
   vercel

4. Follow prompts:
   - Set up and deploy? Yes
   - Which scope? [Your account]
   - Link to existing project? No
   - Project name: syft-defi-platform
   - Directory: ./
   - Override settings? No

5. Add environment variables:
   vercel env add VITE_PUBLIC_STELLAR_NETWORK
   [Enter value: FUTURENET]
   
   vercel env add VITE_VITE_PUBLIC_BACKEND_URL
   [Enter value: https://syft-defi-backend.herokuapp.com]
   
   [Repeat for all env vars from 4.2 step 5]

6. Deploy to production:
   vercel --prod

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
4.4 Update Backend CORS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

After frontend is deployed, update backend CORS:

1. Get your Vercel URL (e.g., https://syft-defi-platform.vercel.app)

2. Update Heroku config:
   heroku config:set CORS_ORIGINS="https://syft-defi-platform.vercel.app,https://syft-defi-platform-*.vercel.app" --app syft-defi-backend

3. Restart backend:
   heroku restart --app syft-defi-backend

================================================================================
PART 5: POST-DEPLOYMENT VERIFICATION
================================================================================

1. Test Backend Health:
   curl https://syft-defi-backend.herokuapp.com/health

   Expected response:
   {
     "success": true,
     "data": {
       "status": "ok",
       "environment": "production",
       "timestamp": "..."
     }
   }

2. Test Frontend:
   Open: https://syft-defi-platform.vercel.app
   - Should load without errors
   - Check browser console for errors
   - Try connecting wallet

3. Test API Connection:
   - Frontend should connect to backend
   - Check Network tab in browser DevTools
   - API calls should go to Heroku backend

4. Monitor Logs:
   # Backend logs
   heroku logs --tail --app syft-defi-backend

   # Frontend logs (in Vercel dashboard)
   https://vercel.com/your-account/syft-defi-platform/logs

================================================================================
PART 6: CUSTOM DOMAIN (OPTIONAL)
================================================================================

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
6.1 Add Domain to Vercel (Frontend)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Go to Vercel Dashboard > Your Project > Settings > Domains
2. Add your domain: syft.yourdomain.com
3. Follow DNS configuration instructions
4. Wait for SSL certificate to be issued

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
6.2 Add Domain to Heroku (Backend)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Add domain:
   heroku domains:add api.yourdomain.com --app syft-defi-backend

2. Get DNS target:
   heroku domains --app syft-defi-backend

3. Add CNAME record in your DNS:
   api.yourdomain.com â†’ [DNS target from step 2]

4. Update frontend env var:
   VITE_VITE_PUBLIC_BACKEND_URL = https://api.yourdomain.com

5. Update backend CORS:
   heroku config:set CORS_ORIGINS="https://syft.yourdomain.com" --app syft-defi-backend

================================================================================
PART 7: CONTINUOUS DEPLOYMENT
================================================================================

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
7.1 Vercel Auto-Deploy (Already Enabled)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Vercel automatically deploys:
- Main branch â†’ Production
- Other branches â†’ Preview deployments

Configure in: Vercel Dashboard > Settings > Git

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
7.2 Heroku Auto-Deploy
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Option A: Using Heroku Dashboard
1. Go to: https://dashboard.heroku.com/apps/syft-defi-backend/deploy/github
2. Connect to GitHub
3. Enable automatic deploys from main branch

Option B: Using GitHub Actions (create .github/workflows/deploy-backend.yml)
See workflow file content below

================================================================================
PART 8: MONITORING & MAINTENANCE
================================================================================

1. Heroku Monitoring:
   - Dashboard: https://dashboard.heroku.com/apps/syft-defi-backend/metrics
   - Logs: heroku logs --tail --app syft-defi-backend
   - Resources: heroku ps --app syft-defi-backend

2. Vercel Monitoring:
   - Dashboard: https://vercel.com/your-account/syft-defi-platform
   - Analytics: Enable in Settings > Analytics
   - Speed Insights: Enable in Settings > Speed Insights

3. Supabase Monitoring:
   - Dashboard: https://app.supabase.com/project/your-project/settings/api
   - Database: Check storage and performance
   - Backups: Enable automatic backups

4. Cost Tracking:
   - Heroku: https://dashboard.heroku.com/account/billing
   - Vercel: Free tier includes 100GB bandwidth
   - Supabase: Free tier includes 500MB database

================================================================================
PART 9: TROUBLESHOOTING
================================================================================

Problem: Backend not starting on Heroku
Solution:
  - Check logs: heroku logs --tail --app syft-defi-backend
  - Verify all env vars are set: heroku config --app syft-defi-backend
  - Ensure Procfile exists in backend/
  - Check build logs: heroku builds --app syft-defi-backend

Problem: Frontend can't connect to backend
Solution:
  - Check VITE_VITE_PUBLIC_BACKEND_URL is correct
  - Verify CORS_ORIGINS on backend includes Vercel URL
  - Check browser console for CORS errors
  - Test backend health endpoint directly

Problem: Database connection fails
Solution:
  - Verify Supabase credentials in Heroku config
  - Check Supabase project is active
  - Verify all migrations ran successfully
  - Check Supabase logs

Problem: Build fails on Vercel
Solution:
  - Check build logs in Vercel dashboard
  - Verify all env vars are set
  - Test build locally: npm run build
  - Check TypeScript errors

Problem: WebSocket not connecting
Solution:
  - Heroku free tier doesn't support WebSockets well
  - Upgrade to Hobby or Standard dyno
  - Or disable WebSocket features in MVP_MODE

Problem: Running out of Heroku credits
Solution:
  - Check usage: https://dashboard.heroku.com/account/billing
  - Optimize dyno size
  - Consider scaling down during low traffic
  - Use Eco dynos ($5/month) for dev/staging

================================================================================
PART 10: SECURITY CHECKLIST
================================================================================

Before going to production:

âœ“ Change all default secrets
âœ“ Use strong JWT_SECRET
âœ“ Enable Heroku's automated security updates
âœ“ Set up Supabase Row Level Security (RLS)
âœ“ Enable HTTPS only (both platforms do this by default)
âœ“ Review CORS settings (whitelist only your domain)
âœ“ Never commit .env files
âœ“ Rotate API keys regularly
âœ“ Enable 2FA on all services (Heroku, Vercel, Supabase)
âœ“ Set up monitoring and alerts
âœ“ Review Supabase database permissions
âœ“ Keep dependencies updated

================================================================================
PART 11: ADDITIONAL FILES NEEDED
================================================================================

Create these files for optimal deployment:

1. frontend/vercel.json:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
{
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "framework": "vite",
  "rewrites": [
    { "source": "/(.*)", "destination": "/index.html" }
  ],
  "headers": [
    {
      "source": "/assets/(.*)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=31536000, immutable"
        }
      ]
    }
  ]
}
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

2. backend/Procfile:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
web: node dist/index.js
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

3. .github/workflows/deploy-backend.yml (Optional - for CI/CD):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
name: Deploy Backend to Heroku

on:
  push:
    branches:
      - main
    paths:
      - 'backend/**'

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: akhileshns/heroku-deploy@v3.12.12
        with:
          heroku_api_key: ${{secrets.HEROKU_API_KEY}}
          heroku_app_name: "syft-defi-backend"
          heroku_email: "your-email@example.com"
          appdir: "backend"
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

================================================================================
QUICK START DEPLOYMENT COMMANDS
================================================================================

# Backend Deployment (from backend/ directory)
cd backend
echo "web: node dist/index.js" > Procfile
heroku create syft-defi-backend
heroku buildpacks:set heroku/nodejs
heroku config:set NODE_ENV=production PORT=3001 [... other env vars]
git add .
git commit -m "Deploy to Heroku"
git push heroku main

# Frontend Deployment (from root directory)
cd frontend
vercel
# Follow prompts and add environment variables
vercel --prod

# Update CORS after frontend deployment
heroku config:set CORS_ORIGINS="https://your-vercel-url.vercel.app" --app syft-defi-backend
heroku restart --app syft-defi-backend

================================================================================
ESTIMATED COSTS
================================================================================

Supabase:
  - Free tier: $0/month (500MB database, 2GB bandwidth)
  - Pro tier: $25/month (8GB database, 50GB bandwidth)

Heroku (using your $300 credits):
  - Free tier: $0/month (but sleeps after 30min inactivity)
  - Hobby: $7/month (no sleeping, SSL)
  - Standard-1X: $25/month (better performance)
  - Standard-2X: $50/month (high traffic)
  
  Your $300 credits last:
  - Hobby: ~42 months
  - Standard-1X: ~12 months
  - Standard-2X: ~6 months

Vercel:
  - Hobby (Free): $0/month (100GB bandwidth, unlimited projects)
  - Pro: $20/month (1TB bandwidth)

Total minimum cost: $0/month (all free tiers)
Recommended production: $32/month (Heroku Hobby + Supabase Free + Vercel Free)

================================================================================
SUPPORT & RESOURCES
================================================================================

Heroku:
  - Docs: https://devcenter.heroku.com/
  - Status: https://status.heroku.com/
  - Support: https://help.heroku.com/

Vercel:
  - Docs: https://vercel.com/docs
  - Support: https://vercel.com/support
  - Community: https://github.com/vercel/vercel/discussions

Supabase:
  - Docs: https://supabase.com/docs
  - Discord: https://discord.supabase.com/
  - Status: https://status.supabase.com/

Stellar:
  - Docs: https://developers.stellar.org/
  - Discord: https://discord.gg/stellar

================================================================================
DONE! ðŸŽ‰
================================================================================

Your Syft DeFi Platform should now be deployed and accessible at:
  Frontend: https://syft-defi-platform.vercel.app
  Backend: https://syft-defi-backend.herokuapp.com
  Health Check: https://syft-defi-backend.herokuapp.com/health

Next steps:
1. Test all features
2. Set up monitoring
3. Configure custom domain (optional)
4. Enable CI/CD (optional)
5. Set up error tracking (Sentry, etc.)
6. Configure analytics

Good luck! ðŸš€
